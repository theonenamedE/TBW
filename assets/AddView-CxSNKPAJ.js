import{s as w,l as b}from"./api-C-KgH05w.js";import{g,j as i,c as d,p as k,a as o,o as u,t as S,m as V,q as M,e as B,b as j,i as h,h as $,f as L}from"./index-zTwHXCNz.js";import{_ as E}from"./MovieList.vue_vue_type_script_setup_true_lang-uv_WH9bw.js";import{a as N}from"./movies-BBD92Bgf.js";const P={class:"flex items-center w-full max-w-md bg-white/70 backdrop-blur-md border border-gray-200/60 shadow-sm hover:shadow-md transition rounded-lg overflow-hidden"},Q=["value"],R=g({__name:"SearchBar",props:{modelValue:{}},emits:["update:modelValue","submit"],setup(m,{emit:t}){const r=m,e=t;i(r.modelValue);function l(){e("submit")}return(v,n)=>(u(),d("form",{onSubmit:k(l,["prevent"]),class:"flex justify-center mb-8"},[o("div",P,[n[1]||(n[1]=o("span",{class:"pl-3 text-gray-400"},[o("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("circle",{cx:"11",cy:"11",r:"8"}),o("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),o("input",{type:"search",placeholder:"Search for a movie",required:"",value:r.modelValue,onInput:n[0]||(n[0]=a=>e("update:modelValue",a.target.value)),class:"flex-1 px-3 py-2 bg-transparent outline-none text-gray-700 placeholder-gray-400"},null,40,Q)])],32))}}),A={role:"alert",class:"alert alert-error"},C=g({__name:"ErrorAlert",props:{message:{}},setup(m){const t=m;return(r,e)=>(u(),d("div",A,[e[0]||(e[0]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,"Error! "+S(t.message),1)]))}}),D={class:"container mx-auto px-4 py-12"},q={key:0,class:"flex justify-center my-16"},I={key:2,class:"text-center text-gray-500 mt-16 bg-gray-50/60 border border-gray-200 rounded-lg py-12"},T={class:"flex justify-center pt-4"},H=g({__name:"AddView",setup(m){const t=i(),r=i(""),e=i(""),l=i(1),v=i(!1),n=i(!1),a=N();async function f(){try{v.value=!0,l.value=1;const s=await w(e.value);if(console.log(s),s.totalResults===0){t.value=[],r.value="No results found";return}r.value="",t.value=s.Results,a.setState(l.value,e.value,s.Results)}catch(s){t.value=[],console.error(s),r.value=s.message}finally{v.value=!1}}async function y(){try{n.value=!0,l.value++;const s=await b(e.value,l.value);t.value?.push(...s.Results),a.setState(l.value,e.value,t.value?t.value:[])}catch(s){l.value=1,r.value=s.message}finally{n.value=!1}}V(()=>{a.searchQuery!==""&&a.searchPage!==0&&a.mediaList!==void 0&&a.mediaList.length>0&&(e.value=a.searchQuery,l.value=a.searchPage,t.value=a.mediaList)});let p=null;return M(e,()=>{p&&clearTimeout(p),p=window.setTimeout(()=>{e.value.length>2&&a.searchQuery!==e.value&&f(),p=null},500)}),(s,c)=>{const x=L("motion-fade-visible-once");return B((u(),d("div",D,[c[2]||(c[2]=o("h1",{class:"text-4xl font-extrabold text-center mb-10 bg-gradient-to-r from-gray-700 to-gray-500 bg-clip-text text-transparent"}," Add a Movie ",-1)),j(R,{modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=_=>e.value=_),onSubmit:f},null,8,["modelValue"]),v.value?(u(),d("div",q,[...c[1]||(c[1]=[o("span",{class:"loading loading-ring loading-lg text-primary"},null,-1)])])):t.value&&t.value.length>0?(u(),h(E,{key:1,movies:t.value,"loading-more":n.value,onLoadMore:y,"is-search":!0},null,8,["movies","loading-more"])):(u(),d("p",I," Search for a movie to add it to your list ")),o("div",T,[r.value?(u(),h(C,{key:0,message:r.value},null,8,["message"])):$("",!0)])])),[[x]])}}});export{H as default};
