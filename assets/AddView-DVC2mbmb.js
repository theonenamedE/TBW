import{_ as b,s as w,l as k}from"./api-CMZZ6Bc4.js";import{g as h,j as i,c as v,p as V,a as r,o as c,m as S,q as M,e as B,b as j,i as p,h as L,f as $}from"./index-D5zDv8D7.js";import{_ as N}from"./MovieList.vue_vue_type_script_setup_true_lang-D71-BoIb.js";import{a as P}from"./movies-Yml7XVPD.js";const Q={class:"flex items-center w-full max-w-md bg-white/70 backdrop-blur-md border border-gray-200/60 shadow-sm hover:shadow-md transition rounded-lg overflow-hidden"},R=["value"],C=h({__name:"SearchBar",props:{modelValue:{}},emits:["update:modelValue","submit"],setup(f,{emit:a}){const o=f,e=a;i(o.modelValue);function l(){e("submit")}return(d,n)=>(c(),v("form",{onSubmit:V(l,["prevent"]),class:"flex justify-center mb-8"},[r("div",Q,[n[1]||(n[1]=r("span",{class:"pl-3 text-gray-400"},[r("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),r("input",{type:"search",placeholder:"Search for a movie",required:"",value:o.modelValue,onInput:n[0]||(n[0]=t=>e("update:modelValue",t.target.value)),class:"flex-1 px-3 py-2 bg-transparent outline-none text-gray-700 placeholder-gray-400"},null,40,R)])],32))}}),q={class:"container mx-auto px-4 py-12"},A={key:0,class:"flex justify-center my-16"},D={key:2,class:"text-center text-gray-500 mt-16 bg-gray-50/60 border border-gray-200 rounded-lg py-12"},E={class:"flex justify-center pt-4"},F=h({__name:"AddView",setup(f){const a=i(),o=i(""),e=i(""),l=i(1),d=i(!1),n=i(!1),t=P();async function g(){try{d.value=!0,l.value=1;const s=await w(e.value);if(console.log(s),s.totalResults===0){a.value=[],o.value="No results found";return}o.value="",a.value=s.Results,t.setState(l.value,e.value,s.Results)}catch(s){a.value=[],console.error(s),o.value=s.message}finally{d.value=!1}}async function y(){try{n.value=!0,l.value++;const s=await k(e.value,l.value);a.value?.push(...s.Results),t.setState(l.value,e.value,a.value?a.value:[])}catch(s){l.value=1,o.value=s.message}finally{n.value=!1}}S(()=>{t.searchQuery!==""&&t.searchPage!==0&&t.mediaList!==void 0&&t.mediaList.length>0&&(e.value=t.searchQuery,l.value=t.searchPage,a.value=t.mediaList)});let m=null;return M(e,()=>{m&&clearTimeout(m),m=window.setTimeout(()=>{e.value.length>2&&t.searchQuery!==e.value&&g(),m=null},500)}),(s,u)=>{const x=$("motion-fade-visible-once");return B((c(),v("div",q,[u[2]||(u[2]=r("h1",{class:"text-4xl font-extrabold text-center mb-10 bg-gradient-to-r from-gray-700 to-gray-500 bg-clip-text text-transparent"}," Add a Movie ",-1)),j(C,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=_=>e.value=_),onSubmit:g},null,8,["modelValue"]),d.value?(c(),v("div",A,[...u[1]||(u[1]=[r("span",{class:"loading loading-ring loading-lg text-primary"},null,-1)])])):a.value&&a.value.length>0?(c(),p(N,{key:1,movies:a.value,"loading-more":n.value,onLoadMore:y,"is-search":!0},null,8,["movies","loading-more"])):(c(),v("p",D," Search for a movie to add it to your list ")),r("div",E,[o.value?(c(),p(b,{key:0,message:o.value},null,8,["message"])):L("",!0)])])),[[x]])}}});export{F as default};
